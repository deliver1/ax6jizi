# ==========================================
# 1. 机型设置 (Target: Xiaomi AX6 / IPQ807x)
# ==========================================
CONFIG_TARGET_ipq807x=y
CONFIG_TARGET_ipq807x_generic=y
CONFIG_TARGET_ipq807x_generic_DEVICE_xiaomi_ax6=y

# ==========================================
# 2. 基础设置 (IPv6 & 优化)
# ==========================================
CONFIG_IPV6=y
CONFIG_PACKAGE_ipv6helper=y
# 移除不必要的内核导出符号(减小体积)
CONFIG_KERNEL_KALLSYMS=n
# 移除不必要的调试信息
CONFIG_DEBUG_INFO=n

# ==========================================
# 3. NSS 硬件加速 & TurboACC
# LiBwrt 6.x 通常默认开启 NSS，这里强制选中 TurboACC
# ==========================================
CONFIG_PACKAGE_luci-app-turboacc=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_OFFLOADING=y
# 确保 NSS 驱动被选中 (根据LiBwrt特性，选中机型通常会自动依赖，但为了保险)
CONFIG_PACKAGE_kmod-qca-nss-drv=y
CONFIG_PACKAGE_kmod-qca-nss-dp=y
CONFIG_PACKAGE_kmod-qca-nss-ecm=y

# ==========================================
# 4. 插件选择: OpenClash & UPnP
# ==========================================
CONFIG_PACKAGE_luci-app-openclash=y
CONFIG_PACKAGE_luci-app-upnp=y

# ==========================================
# 5. 关键依赖解决 (OpenClash 必须用 dnsmasq-full)
# ==========================================
# 取消默认的 dnsmasq
CONFIG_PACKAGE_dnsmasq=n
# 启用 dnsmasq-full
CONFIG_PACKAGE_dnsmasq-full=y
# 启用 ipset (OpenClash 需要)
CONFIG_PACKAGE_ipset=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_iptables-mod-tproxy=y

# ==========================================
# 6. 精简策略 (删除垃圾插件)
# 加上 '# CONFIG_... is not set' 可以确保不编译这些
# ==========================================
# 删除文件共享 (AX6无USB，这些没用)
CONFIG_PACKAGE_luci-app-samba4=n
CONFIG_PACKAGE_autosamba=n
CONFIG_PACKAGE_luci-app-vsftpd=n
CONFIG_PACKAGE_luci-app-filetransfer=n

# 删除 Docker (太占空间)
CONFIG_PACKAGE_luci-app-dockerman=n
CONFIG_PACKAGE_docker=n

# 删除其他常见冗余
CONFIG_PACKAGE_luci-app-access-control=n
CONFIG_PACKAGE_luci-app-adbyby-plus=n
CONFIG_PACKAGE_luci-app-autoreboot=n
CONFIG_PACKAGE_luci-app-ddns=n
CONFIG_PACKAGE_luci-app-nlbwmon=n
CONFIG_PACKAGE_luci-app-unblockmusic=n
CONFIG_PACKAGE_luci-app-vlmcsd=n
CONFIG_PACKAGE_luci-app-wol=n
CONFIG_PACKAGE_luci-app-zerotier=n
CONFIG_PACKAGE_luci-app-wireguard=n

# 主题精简 (只保留 Argon)
CONFIG_PACKAGE_luci-theme-bootstrap=n
CONFIG_PACKAGE_luci-theme-argon=y
